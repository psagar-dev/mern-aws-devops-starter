# The environment (e.g., production, staging, development)
environment: production
nameOverride: "mern-microservice-hello"
fullnameOverride: "mern-microservice-hello"

# Docker image settings
image:
  repository: securelooper/mern-microservices-hello
  tag: latest # Change to a specific version/tag in production!
  pullPolicy: Always

# Number of backend pods to run
replicaCount: 2

# Pod container settings
containerPort: 3001
restartPolicy: Always

# Kubernetes Service for the backend
service: 
  type: LoadBalancer
  port: 3001
  targetPort: 3001
  
# Kubernetes Secret Reference (if you store secrets in K8s)
secretRefName: hello-backend-secrets

  # Direct secrets (prefer using sealed-secrets or external secrets in production)
secret:
  port: MzAwMQo=

# Liveness probe for backend health
livenessProbe:
  httpGet:
    path: /health
    port: 3001
  initialDelaySeconds: 60
  periodSeconds: 10
  failureThreshold: 3
  timeoutSeconds: 2

# Readiness probe for backend readiness
readinessProbe:
  httpGet:
    path: /health
    port: 3001
  initialDelaySeconds: 40
  periodSeconds: 5
  failureThreshold: 3
  timeoutSeconds: 2

resources:
  requests:
    cpu: "100m"
    memory: "128Mi"
  limits:
    cpu: "200m"
    memory: "256Mi"